"0","# Set the heights we will use for our milestones."
"0","positions <- c(0.5, -0.5, 1.0, -1.0, 1.25, -1.25, 1.5, -1.5) "
"0",""
"0","# Set the directions we will use for our milestone, for example above and below."
"0","directions <- c(1, -1) "
"0",""
"0",""
"0","# Assign the positions & directions to each date from those set above."
"0","line_pos <- data.frame("
"0","    ""final_year""=unique(raw$final_year),"
"0","    ""position""=rep(positions, length.out=length(unique(raw$final_year))),"
"0","    ""direction""=rep(directions, length.out=length(unique(raw$final_year))))"
"0",""
"0","raw <- merge(x=raw, y=line_pos, by=""final_year"", all = TRUE) "
"0",""
"0",""
"0","# Create a one month ""buffer"" at the start and end of the timeline"
"0","month_buffer <- 1 "
"0",""
"0","month_date_range <- seq(min(raw$final_year) - months(month_buffer), max(raw$final_year) + months(month_buffer), by='month')"
"0",""
"0",""
"0","# We are adding one month before and one month after the earliest and latest milestone in the clinical course."
"0","## We want the format of the months to be in the 3 letter abbreviations of each month."
"0","month_format <- format(month_date_range, '%b') "
"0","month_df <- data.frame(month_date_range, month_format)"
"0",""
"0",""
"0","year_date_range <- seq(min(raw$final_year) - months(month_buffer), max(raw$final_year) + months(month_buffer), by='year')"
"0",""
"0","# We will only show the years for which we have a december to january transition."
"0","year_date_range <- as.Date("
"0","    intersect("
"0","        ceiling_date(year_date_range, unit=""year""),"
"0","        floor_date(year_date_range, unit=""year"")),  "
"0","        origin = ""1970-01-01"") "
"0",""
"0","# We want the format to be in the four digit format for years."
"0","year_format <- format(year_date_range, '%Y') "
"0","year_df <- data.frame(year_date_range, year_format)"
